[gd_scene load_steps=8 format=3 uid="uid://bwspsf6u3rlyb"]

[ext_resource type="Script" uid="uid://dkvh5imcow4wh" path="res://stages/beach/BeachMinimal.gd" id="1"]
[ext_resource type="Shader" uid="uid://dw885gpwb3icr" path="res://stages/beach/shaders/water_swash.gdshader" id="2"]
[ext_resource type="Shader" uid="uid://c0yp8b0x1vwx4" path="res://stages/beach/shaders/foam_edge.gdshader" id="3"]
[ext_resource type="Texture2D" uid="uid://c4np5cfdthqsd" path="res://stages/tilesets/sand_tile_full_16by16.png" id="4_7edi6"]
[ext_resource type="Script" uid="uid://b78n6udkgwohh" path="res://stages/beach/ShorelineDebug.gd" id="5_debug"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_Water"]
shader = ExtResource("2")
shader_parameter/rect_size = Vector2(0, 0)
shader_parameter/current_edge_y = 420.0
shader_parameter/computed_water_alpha = 1.0
shader_parameter/shore_y = 420.0
shader_parameter/wave_bottom_y = 420.0
shader_parameter/Rmax = 80.0
shader_parameter/w = 0.45
shader_parameter/k = 0.0
shader_parameter/lock_vertical = true
shader_parameter/wave_front = Color(0.08, 0.55, 0.62, 0.95)
shader_parameter/wave_tail = Color(0.05, 0.45, 0.58, 0.95)
shader_parameter/refract_strength = 0.006
shader_parameter/nscrollA = Vector2(0.02, 0.01)
shader_parameter/nscrollB = Vector2(-0.015, 0.008)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_Foam"]
shader = ExtResource("3")
shader_parameter/rect_size = Vector2(0, 0)
shader_parameter/current_edge_y = 420.0
shader_parameter/computed_foam_alpha = 1.0
shader_parameter/shore_y = 420.0
shader_parameter/wave_bottom_y = 420.0
shader_parameter/Rmax = 80.0
shader_parameter/w = 0.45
shader_parameter/k = 0.0
shader_parameter/lock_vertical = true
shader_parameter/edge_width = 12.0
shader_parameter/crest_offset = 7.0
shader_parameter/foam_scroll = 0.2
shader_parameter/foam_alpha = 0.85

[node name="BeachMinimal" type="Node2D"]
script = ExtResource("1")

[node name="Sand" type="Sprite2D" parent="."]
texture = ExtResource("4_7edi6")
centered = false

[node name="Ocean" type="Sprite2D" parent="."]
centered = false

[node name="Wave" type="Sprite2D" parent="."]
material = SubResource("ShaderMaterial_Water")
centered = false

[node name="Foam" type="Sprite2D" parent="."]
material = SubResource("ShaderMaterial_Foam")
centered = false

[node name="ShorelineDebug" type="Node2D" parent="."]
z_index = 100
script = ExtResource("5_debug")
